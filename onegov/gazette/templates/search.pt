<div metal:use-macro="layout.base" i18n:domain="onegov.gazette">
    <tal:block metal:fill-slot="content">

        <h2 i18n:translate>Search</h2>

        <div class="search-filters">
            <form action="" method="GET">

                <div class="row">
                    <div class="small-12 columns">
                        <div class="search-filter">
                            <label for="term" i18n:translate>Term</label>
                            <input type="text" name="term" value="${term}"/>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="small-12 large-6 columns">
                        <div class="search-filter">
                            <label for="organizations" i18n:translate>Organization</label>
                            <select name="organizations" multiple class="chosen-select">
                                <tal:block tal:repeat="(value, title, selected) organizations">
                                    <option value="${value}" tal:attributes="selected selected">${title}</option>
                                </tal:block>
                            </select>
                        </div>
                    </div>
                    <div class="small-12 large-6 columns">
                        <div class="search-filter">
                            <label for="categories" i18n:translate>Category</label>
                            <select name="categories" multiple class="chosen-select">
                                <tal:block tal:repeat="(value, title, selected) categories">
                                    <option value="${value}" tal:attributes="selected selected">${title}</option>
                                </tal:block>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="small-12 large-6 columns">
                        <div class="search-filter">
                            <label for="term" i18n:translate>From</label>
                            <input type="date" name="from_date" value="${from_date}" placeholder="">
                        </div>
                    </div>
                    <div class="small-12 large-6 columns">
                        <div class="search-filter">
                            <label for="to" i18n:translate>To</label>
                            <input type="date" name="to_date" value="${to_date}" placeholder="">
                        </div>
                    </div>
                </div>

                <dl class="sub-nav">
                    <dd>
                        <button type="submit" aria-label="Submit" i18n:attributes="aria-label">
                            <i class="fa fa-check"></i> <tal:block i18n:translate>Search</tal:block>
                        </button>
                    </dd>
                    <dd tal:condition="clear">
                        <a href="${clear}"><i class="fa fa-close" aria-hidden="true"></i> <tal:block i18n:translate>Reset</tal:block></a>
                    </dd>
                </dl>

            </form>
        </div>

        <h3 i18n:translate>Search Results</h3>
        <div tal:condition="not:notices">
            <p i18n:translate>No official notices.</p>
        </div>
        <div tal:condition="notices">
            <dl class="sub-nav">
                <dt><tal:block i18n:translate>Ordering</tal:block>:</dt>
                <dd tal:repeat="key orderings">
                    <tal:block metal:use-macro="layout.macros['order_link']"></tal:block>
                </dd>
                <a href="${pdf}" class="pull-right"><i class="fa fa-file-pdf-o"></i></a>
            </dl>

            <div tal:repeat="notice notices">
                <hr>
                <div>
                    <span class="blank-label">${notice.organization}</span>
                    <span class="blank-label">${notice.category}</span>
                    <span class="blank-label" tal:repeat="issue notice.issue_objects">${layout.format_issue(issue, notice=notice)}</span>
                </div>
                <div class="preview">
                    <h4>${notice.title}</h4>
                    <div>
                        <tal:block metal:use-macro="layout.macros['notice_text']" />
                    </div>
                </div>
            </div>
            <div class="pagination-centered">
                <div metal:use-macro="layout.macros['pagination']" tal:define="collection layout.model; current_page layout.model;" />
            </div>
        </div>

    </tal:block>
</div>
